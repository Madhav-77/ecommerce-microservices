# ------------------------------------------------------
# THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
# ------------------------------------------------------

type BulkCreateProductsResponse {
  created: Int!
  errors: [ProductError!]!
  failed: Int!
  total_received: Int!
}

input CheckStockInput {
  id: ID!
  required_quantity: Int!
}

type CheckStockResponse {
  available: Boolean!
  current_stock: Int!
}

input CreateProductInput {
  name: String!
  price: Float!
  stock: Int!
}

input LoginInput {
  email: String!
  password: String!
}

type LoginResponse {
  user: User
  valid: Boolean!
}

type Mutation {
  """Bulk create products (Client Streaming RPC)"""
  bulkCreateProducts(products: [CreateProductInput!]!): BulkCreateProductsResponse!

  """Create a new product"""
  createProduct(input: CreateProductInput!): Product!

  """Register a new user"""
  createUser(input: RegisterUserInput!): User!

  """Login with credentials"""
  login(input: LoginInput!): LoginResponse!

  """Place a new order (orchestration handled by Order Service)"""
  placeOrder(input: PlaceOrderInput!): Order!
}

type Order {
  created_at: String!
  id: ID!
  items: [OrderItem!]!
  status: OrderStatus!
  total_amount: Float!
  user_id: ID!
}

type OrderItem {
  id: ID!
  price: Float!
  product_id: ID!
  quantity: Int!
}

input OrderItemInput {
  product_id: ID!
  quantity: Int!
}

type OrderList {
  orders: [Order!]!
  total: Int!
}

"""The status of an order"""
enum OrderStatus {
  CANCELLED
  CREATED
  DELIVERED
  FAILED
  OUT_FOR_DELIVERY
  PAID
  PROCESSING
  SHIPPED
}

type OrderStatusUpdate {
  message: String!
  order_id: ID!
  status: OrderStatus!
  timestamp: String!
}

input PlaceOrderInput {
  items: [OrderItemInput!]!
  user_email: String!
}

type Product {
  created_at: String!
  id: ID!
  name: String!
  price: Float!
  stock: Int!
}

type ProductError {
  error_message: String!
  product_name: String!
}

type ProductList {
  products: [Product!]!
  total: Int!
}

type Query {
  """Check product stock availability"""
  checkStock(input: CheckStockInput!): CheckStockResponse!

  """Get order by ID"""
  getOrder(id: String!): Order

  """Get product by ID"""
  getProduct(id: String!): Product

  """Get all products with pagination"""
  getProducts(limit: Float! = 10, page: Float! = 1): ProductList!

  """Get user by email"""
  getUser(email: String!): User

  """Get orders for a user"""
  getUserOrders(limit: Float! = 10, page: Float! = 1, user_email: String!): OrderList!

  """Test query to verify GraphQL is working"""
  hello: String!

  """Returns gateway status and connection info"""
  status: String!
}

input RegisterUserInput {
  email: String!
  name: String!
  password: String!
}

type Subscription {
  interactiveOrderTracking(order_id: String!): TrackingResponse!

  """Watch real-time order status updates (Server Streaming RPC)"""
  watchOrderStatus(order_id: String!): OrderStatusUpdate!
}

type TrackingResponse {
  eta: String
  location: String
  message: String!
  order_id: ID!
  status: OrderStatus!
  timestamp: String!
  type: String!
}

type User {
  created_at: String!
  email: String!
  id: ID!
  name: String!
}